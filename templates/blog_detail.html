{% extends "base.html" %}
{% block title %} Blog Detail {% endblock %}
{% load crispy_forms_tags %}

{% block content %}

<main class="container-fluid">
    <!--Blog post container-->
    <div class="mx-auto col-12 col-md-10 col-lg-8" id="blog-form">
        <div class="row text-center hero-row">
            <div class="col-10 justify-content-center blog-text">
                <h1>Blog By: {{ object.created_by }}</h1>
            </div>
            <div class="col-10 justify-content-center blog-text">
                <h3> Posted On: {{ object.date_created}}</h3>
            </div>
        </div>
        <div class="row text-center hero-row">
            <div class="col-10 blog-text justify-content-center">
                <h2>{{ object.title}}</h2>
            </div>
        </div>
        <div class="row text-center">
            <div class="col-12 justify-content-center">
                <!--If user has not uploaded an image to the blog and the category is Football-->
                {% if "placeholder" in object.blog_image.url and object.category == "Football" %}
                <img src="https://res.cloudinary.com/dsdurzeu2/image/upload/v1678132670/the-ball-stadion-football-the-pitch-46798_nimtac.jpg"
                    alt="placeholder-image" class="blog-image">
                <!--If user has not uploaded an image to the blog and the category is GAA-->
                {% elif "placeholder" in object.blog_image.url and object.category == "GAA"%}
                <img src="https://res.cloudinary.com/dsdurzeu2/image/upload/v1678833173/static/css/the-gaa-a-community-more-than-a-sporting-organisation_mkrkfd.webp"
                    alt="placeholder-image" class="blog-image">
                <!--If user has not uploaded an image to the blog and the category is Rugby-->
                {% elif "placeholder" in object.blog_image.url and object.category == "Rugby"%}
                <img src="https://res.cloudinary.com/dsdurzeu2/image/upload/v1678833501/pexels-photo-6373836_tqigji.jpg"
                    alt="placeholder-image" class="blog-image">
                <!--If user has uploaded their own image-->
                {% else %}
                <img src="{{ object.blog_image.url }}" alt="user-upload-image" class="blog-image">
                {% endif %}
            </div>
        </div>
        <div class="row" id="body-row">
            <p>{{ object.body|linebreaks }}</p>
        </div>
    </div>
    <!--Comment section-->
    <div class="container mx-auto col-12 col-md-10 col-lg-8 comment-cont">
        <div class="row text-center">
            <div class="col-12">
                <h2>Comments:</h2>
            </div>
        </div>
        <hr>
        <!--Loops through comments-->
        {% for comment in comments%}
        <div class="row commment-row text-center">
            <div class="col-lg-4 col-12">
                <h3>Comment by: {{ comment.user}}</h3>
            </div>
            <div class="col">
                <h3>On: {{ comment.time }}</h3>
            </div>
            <!--Checks if logged in user is the author of the comment-->
            {% if request.user == comment.user %}
            <div class="btn-group col">
                <a href="{% url 'delete_comment' comment.pk %}" class="btn btn-danger mb-1">Delete</a>
                <a href="{% url 'edit_comment' comment.pk%}" class="btn btn-warning mb-1">Edit</a>
            </div>
            {% endif %}
        </div>
        <hr>
        <div class="row commment-row">
            <div class="col-12">
                <p>{{ comment.comment }}</p>
            </div>
        </div>
    </div>
    {% endfor %}
</main>




{% endblock %}